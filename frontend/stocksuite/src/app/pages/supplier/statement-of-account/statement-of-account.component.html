<h3>Outstanding balance</h3>

<!-- Botones de acciÃ³n -->
<div>
  <button class="btn btn-sm btn-success" (click)="openCreateModal()">
    Create
  </button>
  <button
    class="btn btn-sm btn-warning"
    [disabled]="!currentTransaction"
    (click)="openEditModal()"
  >
    Edit
  </button>
  <button
    class="btn btn-sm btn-danger"
    [disabled]="!currentTransaction"
    (click)="openDeleteModal()"
  >
    Delete
  </button>
</div>

<!-- Totales -->
<div class="totals">
  <p>Total B {{ totals.totalB | currency }}</p>
  <p>Total N {{ totals.totalN | currency }}</p>
  <p>Total Balance: {{ totals.totalBalance | currency }}</p>
</div>

<!-- Tabla de transacciones -->
<div class="container-fluid">
  <div class="table-responsive" id="table-container">
    <table class="table table-striped table-hover align-middle table-sm">
      <thead class="table-dark">
        <tr>
          <th scope="col">#Id</th>
          <th scope="col">Date</th>
          <th scope="col">Number</th>
          <th scope="col">Type</th>
          <th scope="col">Income</th>
          <th scope="col">Expense</th>
          <th scope="col">Description</th>
          <th scope="col">Balance</th>
        </tr>
      </thead>

      <tbody>
        <tr
          *ngFor="
            let transaction of transactionList;
            let i = index;
            trackBy: trackByFn
          "
          (click)="selectTransaction(transaction)"
          (Keyup)="selectTransaction(transaction)"
          [class.selected]="transaction === currentTransaction"
        >
          <td>{{ transaction.transactionId }}</td>
          <td>{{ transaction.date | date: 'dd-MM-yyyy'}}</td>
          <td>{{ transaction.transactionNumber }}</td>
          <td>{{ transaction.type }}</td>

          <!-- Ingresos -->
          <td *ngIf="transaction.type === 'invoice'">
            {{ transaction.amount | currency }}
          </td>
          <td *ngIf="transaction.type !== 'invoice'">-</td>

          <!-- Egresos -->
          <td *ngIf="transaction.type === 'recipe'">
            {{ transaction.amount | currency }}
          </td>
          <td *ngIf="transaction.type !== 'recipe'">-</td>

          <td>{{ transaction.description }}</td>

          <!-- Calcular balance acumulado -->

          <td [style.color]="calculateBalance()[i] < 0 ? 'red' : 'black'">
            {{ calculateBalance()[i] | currency }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
